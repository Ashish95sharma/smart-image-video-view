{"version":3,"sources":["../src/index.ts","../src/components/SmartImage.tsx"],"sourcesContent":["export { SmartImage } from \"./components/SmartImage\";\nexport type { SmartImageProps } from \"./components/SmartImage\";\n","import React, { useEffect, useRef, useState } from \"react\";\n\nexport interface SmartImageProps extends React.ImgHTMLAttributes<HTMLImageElement> {\n  fallback?: string;\n  loader?: React.ReactNode;\n  lazy?: boolean;\n  aspectRatio?: string; // e.g. \"16/9\" or \"1/1\"\n  blurUpSrc?: string; // small blurred preview\n  cover?: boolean;\n  sources?: string[];\n  videoUrl?: string; // if provided, renders a video in place of image\n}\n\nexport const SmartImage: React.FC<SmartImageProps> = ({\n  src,\n  alt,\n  fallback,\n  loader,\n  lazy = true,\n  aspectRatio,\n  blurUpSrc,\n  cover = true,\n  style,\n  sources,\n  videoUrl,\n  ...rest\n}) => {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const imgRef = useRef<HTMLImageElement | null>(null);\n  const [loaded, setLoaded] = useState(false);\n  const [error, setError] = useState(false);\n  const [inView, setInView] = useState(!lazy);\n\n  const hasGallery = Array.isArray(sources) && sources.length > 0;\n  const gallerySources = hasGallery ? sources! : (src ? [String(src)] : []);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [viewerOpen, setViewerOpen] = useState(false);\n\n  // Zoom + Pan state\n  const [scale, setScale] = useState(1);\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\n  const [isPanning, setIsPanning] = useState(false);\n  const panStartRef = useRef({ x: 0, y: 0 });\n  const offsetStartRef = useRef({ x: 0, y: 0 });\n\n  // Touch/pinch zoom state\n  const [lastTouchDistance, setLastTouchDistance] = useState(0);\n  const [lastTouchScale, setLastTouchScale] = useState(1);\n\n  const minScale = 1;\n  const maxScale = 5;\n  const zoomStep = 0.2;\n\n  useEffect(() => {\n    if (!lazy) return;\n    const el = containerRef.current;\n    if (!el) return;\n    let obs: IntersectionObserver | undefined;\n    if (\"IntersectionObserver\" in window) {\n      obs = new IntersectionObserver(\n        (entries) => {\n          if (entries.some((e) => e.isIntersecting)) {\n            setInView(true);\n            obs?.disconnect();\n          }\n        },\n        { rootMargin: \"200px\" }\n      );\n      obs.observe(el);\n    } else setInView(true);\n    return () => obs?.disconnect();\n  }, [lazy]);\n\n  useEffect(() => setError(false), [currentIndex, src]);\n\n  useEffect(() => {\n    if (!viewerOpen) return;\n    const onKey = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") setViewerOpen(false);\n      if (e.key === \"ArrowRight\") goNext();\n      if (e.key === \"ArrowLeft\") goPrev();\n      if (e.key === \"+\" || e.key === \"=\") {\n        e.preventDefault();\n        zoomIn();\n      }\n      if (e.key === \"-\") {\n        e.preventDefault();\n        zoomOut();\n      }\n      if (e.key.toLowerCase() === \"r\") {\n        e.preventDefault();\n        resetZoom();\n      }\n      if (e.key === \"0\") {\n        e.preventDefault();\n        zoomTo(1);\n      }\n      if (e.key === \"1\") {\n        e.preventDefault();\n        zoomTo(2);\n      }\n      if (e.key === \"2\") {\n        e.preventDefault();\n        zoomTo(3);\n      }\n    };\n    window.addEventListener(\"keydown\", onKey);\n    return () => window.removeEventListener(\"keydown\", onKey);\n  }, [viewerOpen, scale]);\n\n  const onLoad = () => setLoaded(true);\n  const onError = () => setError(true);\n\n  const wrapperStyle: React.CSSProperties = {\n    position: \"relative\",\n    overflow: \"hidden\",\n    display: \"inline-block\",\n    ...(aspectRatio ? { aspectRatio } : {}),\n    ...style\n  };\n\n  const imgStyle: React.CSSProperties = {\n    width: \"100%\",\n    height: \"100%\",\n    objectFit: cover ? \"cover\" : \"contain\",\n    display: loaded ? \"block\" : \"none\",\n    transition: \"opacity 300ms ease\",\n    cursor: \"zoom-in\"\n  };\n\n  // --- Video support ---\n  const isVideo = Boolean(videoUrl);\n  const toYouTubeEmbed = (url: string): string => {\n    try {\n      const u = new URL(url);\n      if (u.hostname.includes(\"youtube.com\")) {\n        const videoId = u.searchParams.get(\"v\");\n        const list = u.searchParams.get(\"list\");\n        const index = u.searchParams.get(\"index\");\n        const base = videoId ? `https://www.youtube.com/embed/${videoId}` : \"\";\n        const params = new URLSearchParams();\n        if (list) params.set(\"list\", list);\n        if (index) params.set(\"index\", index);\n        const qs = params.toString();\n        return qs ? `${base}?${qs}` : base;\n      }\n      if (u.hostname.includes(\"youtu.be\")) {\n        const id = u.pathname.replace(\"/\", \"\");\n        return `https://www.youtube.com/embed/${id}`;\n      }\n      return url;\n    } catch {\n      return url;\n    }\n  };\n\n  if (isVideo) {\n    const embedSrc = toYouTubeEmbed(String(videoUrl));\n    const wrapperStyle: React.CSSProperties = {\n      position: \"relative\",\n      overflow: \"hidden\",\n      display: \"inline-block\",\n      ...(aspectRatio ? { aspectRatio } : {}),\n      ...style\n    };\n\n    return (\n      <div ref={containerRef} style={wrapperStyle} aria-busy={false}>\n        <iframe\n          src={embedSrc}\n          title={alt ?? \"video\"}\n          style={{ width: \"100%\", height: \"100%\", border: 0, display: \"block\" }}\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n          allowFullScreen\n        />\n      </div>\n    );\n  }\n\n  const currentSrc = gallerySources[currentIndex] ?? \"\";\n\n  const goPrev = () => {\n    setCurrentIndex((i) => (i - 1 + gallerySources.length) % gallerySources.length);\n    resetZoom();\n  };\n  const goNext = () => {\n    setCurrentIndex((i) => (i + 1) % gallerySources.length);\n    resetZoom();\n  };\n  const openViewer = () => {\n    setViewerOpen(true);\n    resetZoom();\n  };\n\n  // --- Zoom logic ---\n  const zoomIn = (cx?: number, cy?: number) => {\n    setScale((s) => {\n      const newScale = Math.min(maxScale, parseFloat((s + zoomStep).toFixed(3)));\n      if (cx && cy) adjustOffsetOnZoom(s, newScale, cx, cy);\n      return newScale;\n    });\n  };\n  const zoomOut = (cx?: number, cy?: number) => {\n    setScale((s) => {\n      const newScale = Math.max(minScale, parseFloat((s - zoomStep).toFixed(3)));\n      if (cx && cy) adjustOffsetOnZoom(s, newScale, cx, cy);\n      if (newScale === 1) setOffset({ x: 0, y: 0 });\n      return newScale;\n    });\n  };\n  const resetZoom = () => {\n    setScale(1);\n    setOffset({ x: 0, y: 0 });\n  };\n\n  // Smooth zoom to specific scale\n  const zoomTo = (targetScale: number, cx?: number, cy?: number) => {\n    const clampedScale = Math.max(minScale, Math.min(maxScale, targetScale));\n    setScale(clampedScale);\n    if (cx && cy) {\n      const rect = document.querySelector('[role=\"dialog\"]')?.getBoundingClientRect();\n      if (rect) {\n        adjustOffsetOnZoom(scale, clampedScale, cx - rect.left, cy - rect.top);\n      }\n    }\n    if (clampedScale === 1) setOffset({ x: 0, y: 0 });\n  };\n\n  // Keep zoom centered on cursor\n  const adjustOffsetOnZoom = (oldScale: number, newScale: number, cx: number, cy: number) => {\n    const dx = (cx - offset.x) / oldScale;\n    const dy = (cy - offset.y) / oldScale;\n    setOffset({\n      x: cx - dx * newScale,\n      y: cy - dy * newScale\n    });\n  };\n\n  const onWheelViewer: React.WheelEventHandler<HTMLDivElement> = (e) => {\n    e.preventDefault();\n    const rect = e.currentTarget.getBoundingClientRect();\n    const cx = e.clientX - rect.left;\n    const cy = e.clientY - rect.top;\n\n    // More sensitive zoom with smaller steps for wheel\n    const wheelZoomStep = zoomStep * 0.5;\n    const currentScale = scale;\n\n    if (e.deltaY < 0) {\n      const newScale = Math.min(maxScale, parseFloat((currentScale + wheelZoomStep).toFixed(3)));\n      setScale(newScale);\n      if (cx && cy) adjustOffsetOnZoom(currentScale, newScale, cx, cy);\n    } else {\n      const newScale = Math.max(minScale, parseFloat((currentScale - wheelZoomStep).toFixed(3)));\n      setScale(newScale);\n      if (cx && cy) adjustOffsetOnZoom(currentScale, newScale, cx, cy);\n      if (newScale === 1) setOffset({ x: 0, y: 0 });\n    }\n  };\n\n  const onDoubleClickViewer: React.MouseEventHandler<HTMLDivElement> = (e) => {\n    // Only handle double-click on the image itself, not on controls\n    if (e.target !== e.currentTarget && !(e.target as HTMLElement).closest('img')) {\n      return;\n    }\n    e.preventDefault();\n    const rect = e.currentTarget.getBoundingClientRect();\n    const cx = e.clientX - rect.left;\n    const cy = e.clientY - rect.top;\n    if (scale === 1) zoomIn(cx, cy);\n    else resetZoom();\n  };\n\n  // --- Pan logic ---\n  const onPointerDown: React.PointerEventHandler<HTMLDivElement> = (e) => {\n    if (scale === 1) return;\n    e.currentTarget.setPointerCapture(e.pointerId);\n    setIsPanning(true);\n    panStartRef.current = { x: e.clientX, y: e.clientY };\n    offsetStartRef.current = { ...offset };\n  };\n  const onPointerMove: React.PointerEventHandler<HTMLDivElement> = (e) => {\n    if (!isPanning) return;\n    const dx = e.clientX - panStartRef.current.x;\n    const dy = e.clientY - panStartRef.current.y;\n    setOffset({ x: offsetStartRef.current.x + dx, y: offsetStartRef.current.y + dy });\n  };\n  const endPan = () => setIsPanning(false);\n\n  // Touch handlers for pinch-to-zoom\n  const getTouchDistance = (touches: React.TouchList) => {\n    if (touches.length < 2) return 0;\n    const dx = touches[0].clientX - touches[1].clientX;\n    const dy = touches[0].clientY - touches[1].clientY;\n    return Math.sqrt(dx * dx + dy * dy);\n  };\n\n  const getTouchCenter = (touches: React.TouchList) => {\n    if (touches.length === 0) return { x: 0, y: 0 };\n    if (touches.length === 1) return { x: touches[0].clientX, y: touches[0].clientY };\n\n    const x = (touches[0].clientX + touches[1].clientX) / 2;\n    const y = (touches[0].clientY + touches[1].clientY) / 2;\n    return { x, y };\n  };\n\n  const onTouchStart: React.TouchEventHandler<HTMLDivElement> = (e) => {\n    if (e.touches.length === 1) {\n      // Single touch - start panning\n      if (scale > 1) {\n        setIsPanning(true);\n        panStartRef.current = { x: e.touches[0].clientX, y: e.touches[0].clientY };\n        offsetStartRef.current = { ...offset };\n      }\n    } else if (e.touches.length === 2) {\n      // Two touches - start pinch zoom\n      const distance = getTouchDistance(e.touches);\n      setLastTouchDistance(distance);\n      setLastTouchScale(scale);\n    }\n  };\n\n  const onTouchMove: React.TouchEventHandler<HTMLDivElement> = (e) => {\n    e.preventDefault();\n\n    if (e.touches.length === 1 && isPanning) {\n      // Single touch panning\n      const dx = e.touches[0].clientX - panStartRef.current.x;\n      const dy = e.touches[0].clientY - panStartRef.current.y;\n      setOffset({ x: offsetStartRef.current.x + dx, y: offsetStartRef.current.y + dy });\n    } else if (e.touches.length === 2) {\n      // Two touches - pinch zoom\n      const distance = getTouchDistance(e.touches);\n      if (lastTouchDistance > 0) {\n        const scaleChange = distance / lastTouchDistance;\n        const newScale = Math.max(minScale, Math.min(maxScale, lastTouchScale * scaleChange));\n        setScale(newScale);\n\n        // Center zoom on touch center\n        const center = getTouchCenter(e.touches);\n        const rect = e.currentTarget.getBoundingClientRect();\n        const cx = center.x - rect.left;\n        const cy = center.y - rect.top;\n        adjustOffsetOnZoom(lastTouchScale, newScale, cx, cy);\n      }\n    }\n  };\n\n  const onTouchEnd: React.TouchEventHandler<HTMLDivElement> = (e) => {\n    if (e.touches.length === 0) {\n      setIsPanning(false);\n      setLastTouchDistance(0);\n    } else if (e.touches.length === 1) {\n      setLastTouchDistance(0);\n    }\n  };\n\n  return (\n    <div ref={containerRef} style={wrapperStyle} aria-busy={!loaded}>\n      {!hasGallery && blurUpSrc && !loaded && !error && (\n        <img\n          src={blurUpSrc}\n          alt={alt}\n          style={{ width: \"100%\", height: \"100%\", objectFit: cover ? \"cover\" : \"contain\", filter: \"blur(8px)\", transform: \"scale(1.05)\" }}\n          aria-hidden\n        />\n      )}\n      {!loaded && !error && !blurUpSrc && (loader ?? <div style={{ width: \"100%\", height: \"100%\", background: \"#eee\" }} />)}\n      {inView && (\n        <img\n          ref={imgRef}\n          src={error ? fallback ?? \"\" : currentSrc}\n          alt={alt}\n          onLoad={onLoad}\n          onError={onError}\n          style={imgStyle}\n          onClick={openViewer}\n          {...rest}\n        />\n      )}\n      {error && fallback && loaded === false && (\n        <img src={fallback} alt={alt} style={{ width: \"100%\", height: \"100%\", objectFit: cover ? \"cover\" : \"contain\" }} />\n      )}\n\n      {gallerySources.length > 1 && (\n        <div style={{ display: \"flex\", gap: 8, marginTop: 8, overflowX: \"auto\", paddingBottom: 4 }}>\n          {gallerySources.map((thumbSrc, i) => (\n            <button\n              key={thumbSrc + i}\n              onClick={() => { setCurrentIndex(i); resetZoom(); }}\n              style={{\n                border: i === currentIndex ? \"2px solid #333\" : \"1px solid #ccc\",\n                padding: 0, borderRadius: 4, background: \"transparent\", cursor: \"pointer\"\n              }}\n            >\n              <img src={thumbSrc} alt={alt} style={{ width: 64, height: 64, objectFit: \"cover\", borderRadius: 4 }} loading=\"lazy\" />\n            </button>\n          ))}\n        </div>\n      )}\n\n      {viewerOpen && (\n        <div\n          role=\"dialog\"\n          aria-modal=\"true\"\n          onClick={() => setViewerOpen(false)}\n          style={{\n            position: \"fixed\", inset: 0, background: \"rgba(0,0,0,0.95)\",\n            display: \"flex\", alignItems: \"center\", justifyContent: \"center\",\n            zIndex: 9999, touchAction: \"none\"\n          }}\n          onWheel={onWheelViewer}\n          onDoubleClick={onDoubleClickViewer}\n          onPointerDown={onPointerDown}\n          onPointerMove={onPointerMove}\n          onPointerUp={endPan}\n          onPointerCancel={endPan}\n          onTouchStart={onTouchStart}\n          onTouchMove={onTouchMove}\n          onTouchEnd={onTouchEnd}\n        >\n          <img\n            src={currentSrc}\n            alt={alt}\n            onClick={(e) => e.stopPropagation()}\n            style={{\n              maxWidth: \"90vw\",\n              maxHeight: \"90vh\",\n              objectFit: \"contain\",\n              transform: `translate(${offset.x}px, ${offset.y}px) scale(${scale})`,\n              transition: isPanning ? \"none\" : \"transform 200ms cubic-bezier(0.4, 0, 0.2, 1)\",\n              cursor: scale > 1 ? (isPanning ? \"grabbing\" : \"grab\") : \"zoom-in\",\n              willChange: \"transform\"\n            }}\n          />\n\n          {/* Prev / Next */}\n          {gallerySources.length > 1 && (\n            <>\n              <button onClick={(e) => { e.stopPropagation(); goPrev(); }}\n                style={navBtnStyle(\"left\")} aria-label=\"Previous\">‹</button>\n              <button onClick={(e) => { e.stopPropagation(); goNext(); }}\n                style={navBtnStyle(\"right\")} aria-label=\"Next\">›</button>\n              <div style={{\n                position: \"fixed\", bottom: 20, left: \"50%\",\n                transform: \"translateX(-50%)\", color: \"#fff\", fontSize: 14,\n                background: \"rgba(0,0,0,0.3)\",\n                padding: \"8px 16px\",\n                borderRadius: \"20px\",\n                backdropFilter: \"blur(10px)\"\n              }}>\n                {currentIndex + 1} / {gallerySources.length}\n              </div>\n            </>\n          )}\n\n          {/* Zoom Controls (only reset/percentage) */}\n          <div\n            onClick={(e) => e.stopPropagation()}\n            onDoubleClick={(e) => e.stopPropagation()}\n            style={{\n              position: \"fixed\",\n              bottom: 20,\n              right: 20,\n              display: \"flex\",\n              gap: 8,\n              alignItems: \"center\",\n              background: \"rgba(0,0,0,0.3)\",\n              padding: \"8px 12px\",\n              borderRadius: \"12px\",\n              backdropFilter: \"blur(10px)\"\n            }}\n          >\n            <ControlButton\n              onClick={(e) => {\n                e.stopPropagation();\n                resetZoom();\n              }}\n              style={{\n                minWidth: \"60px\",\n                fontSize: \"14px\",\n                fontWeight: \"600\"\n              }}\n            >\n              {Math.round(scale * 100)}%\n            </ControlButton>\n          </div>\n\n\n\n          <ControlButton onClick={(e) => { e.stopPropagation(); setViewerOpen(false); }}\n            style={{ position: \"fixed\", top: 20, right: 20 }}>✕</ControlButton>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Reusable styled buttons\nconst ControlButton: React.FC<React.ButtonHTMLAttributes<HTMLButtonElement>> = ({ children, style, disabled, ...props }) => (\n  <button\n    {...props}\n    disabled={disabled}\n    style={{\n      background: disabled ? \"rgba(255,255,255,0.05)\" : \"rgba(255,255,255,0.15)\",\n      color: disabled ? \"rgba(255,255,255,0.5)\" : \"#fff\",\n      border: \"none\",\n      padding: \"10px 14px\",\n      borderRadius: 8,\n      cursor: disabled ? \"not-allowed\" : \"pointer\",\n      fontSize: 16,\n      boxShadow: disabled ? \"none\" : \"0 2px 6px rgba(0,0,0,0.4)\",\n      transition: \"all 0.2s ease\",\n      transform: disabled ? \"none\" : \"scale(1)\",\n      ...style\n    }}\n    onMouseEnter={(e) => {\n      if (!disabled) {\n        e.currentTarget.style.background = \"rgba(255,255,255,0.25)\";\n        e.currentTarget.style.transform = \"scale(1.05)\";\n      }\n    }}\n    onMouseLeave={(e) => {\n      if (!disabled) {\n        e.currentTarget.style.background = \"rgba(255,255,255,0.15)\";\n        e.currentTarget.style.transform = \"scale(1)\";\n      }\n    }}\n  >\n    {children}\n  </button>\n);\n\nconst navBtnStyle = (side: \"left\" | \"right\"): React.CSSProperties => ({\n  position: \"fixed\",\n  [side]: 20,\n  top: \"50%\",\n  transform: \"translateY(-50%)\",\n  background: \"rgba(255,255,255,0.15)\",\n  color: \"#fff\",\n  border: \"none\",\n  padding: \"14px 16px\",\n  borderRadius: 8,\n  cursor: \"pointer\",\n  fontSize: 22,\n  boxShadow: \"0 2px 6px rgba(0,0,0,0.4)\"\n});\n"],"mappings":"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","names":["wrapperStyle"]}